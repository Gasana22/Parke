<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parking Details - Parke</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --glass: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 20px 60px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --border-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            padding: 10px 18px;
            border-radius: 25px;
            transition: var(--transition);
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(99, 102, 241, 0.05);
        }

        .nav-links a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .notification-badge {
            background: var(--danger);
            color: white;
            border-radius: 20px;
            padding: 4px 8px;
            font-size: 0.75rem;
            font-weight: 700;
            min-width: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            box-shadow: var(--shadow);
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .breadcrumb a:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        .parking-header-details {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 2rem;
            align-items: start;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 1024px) {
            .parking-header-details {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .header-actions {
                align-items: center;
                flex-direction: row;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .parking-header-details {
                padding: 1.5rem;
            }
            
            .header-actions {
                flex-direction: column;
            }
        }

        .header-main h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .rating-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: var(--dark);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .review-count {
            font-size: 0.9rem;
            font-weight: 600;
            opacity: 0.8;
        }

        .header-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: flex-end;
        }

        .favorite-form {
            margin: 0;
        }

        .btn {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 600;
            transition: var(--transition);
            font-size: 0.95rem;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-large {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .btn-favorite {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-favorite-active {
            background: linear-gradient(135deg, #f72585, #e53e3e);
            color: white;
            border-color: transparent;
        }

        .btn-favorite:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .details-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 1024px) {
            .details-grid {
                grid-template-columns: 1fr;
            }
        }

        .detail-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }

        .detail-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .detail-card h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid;
            border-image: linear-gradient(135deg, var(--primary), var(--primary-dark)) 1;
        }

        .image-gallery-preview {
            position: relative;
        }

        .main-preview-image {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 1rem;
            position: relative;
        }

        .main-preview-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .main-preview-image:hover img {
            transform: scale(1.05);
        }

        .no-image-large {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #a0aec0;
            font-size: 4rem;
        }

        .no-image-large span {
            font-size: 1.1rem;
            margin-top: 1rem;
            color: #718096;
        }

        .preview-thumbnails {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .preview-thumbnail {
            width: 100px;
            height: 75px;
            object-fit: cover;
            border: 3px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .preview-thumbnail:hover,
        .preview-thumbnail.active {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .gallery-actions {
            text-align: center;
        }

        .btn-secondary {
            background: var(--gray);
            box-shadow: 0 4px 15px rgba(100, 116, 139, 0.3);
        }

        .btn-secondary:hover {
            background: #475569;
            box-shadow: 0 6px 20px rgba(100, 116, 139, 0.4);
        }

        .overview-grid {
            display: grid;
            gap: 1.5rem;
        }

        .overview-item {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            transition: var(--transition);
        }

        .overview-item:hover {
            transform: translateX(10px);
            background: linear-gradient(135deg, #edf2f7, #e2e8f0);
        }

        .overview-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
        }

        .overview-text {
            display: flex;
            flex-direction: column;
        }

        .overview-text strong {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .overview-text span {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .amenities-grid {
                grid-template-columns: 1fr;
            }
        }

        .amenity-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.25rem;
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border-radius: 10px;
            transition: var(--transition);
        }

        .amenity-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.2);
        }

        .amenity-icon {
            font-size: 1.5rem;
        }

        .address {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 1.5rem;
            padding: 1rem 1.5rem;
            background: #f7fafc;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .map-placeholder {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            border: 2px dashed #cbd5e0;
            transition: var(--transition);
        }

        .map-placeholder:hover {
            border-color: var(--primary);
            background: linear-gradient(135deg, #edf2f7, #e2e8f0);
        }

        .map-image {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.7;
        }

        .slots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .slots-grid {
                grid-template-columns: 1fr;
            }
            
            .overview-item {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
        }

        .slot-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.25rem;
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            transition: var(--transition);
        }

        .slot-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.15);
        }

        .slot-icon {
            font-size: 1.75rem;
        }

        .slot-info {
            display: flex;
            flex-direction: column;
        }

        .slot-info strong {
            color: var(--dark);
            font-weight: 700;
        }

        .slot-info span {
            color: var(--gray);
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }

        .no-slots, .no-reviews {
            text-align: center;
            color: #a0aec0;
            font-style: italic;
            padding: 3rem 2rem;
            background: #f7fafc;
            border-radius: 12px;
            border: 2px dashed #e2e8f0;
        }

        .sidebar-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 1.5rem;
        }

        .sidebar-card h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--primary);
        }

        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .review-item {
            padding: 1.5rem;
            background: linear-gradient(135deg, #fff7ed, #fed7aa);
            border-radius: 12px;
            border-left: 4px solid #f59e0b;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .reviewer-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .reviewer-name {
            font-weight: 700;
            color: var(--dark);
        }

        .review-rating {
            background: #f59e0b;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .review-comment {
            color: var(--gray);
            line-height: 1.5;
            font-style: italic;
        }

        .review-date {
            color: #a0aec0;
            font-size: 0.85rem;
            margin-top: 0.75rem;
            text-align: right;
        }

        .operating-hours {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .hour-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .hour-item.closed {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-left-color: var(--danger);
        }

        .hour-day {
            font-weight: 700;
            color: var(--dark);
        }

        .hour-time {
            font-weight: 600;
            color: var(--gray);
        }

        .hour-closed {
            color: var(--danger);
            font-weight: 600;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }

        .contact-icon {
            font-size: 1.5rem;
        }

        .contact-details {
            display: flex;
            flex-direction: column;
        }

        .contact-label {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .contact-value {
            font-weight: 700;
            color: var(--dark);
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 2rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius);
            max-width: 90vw;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            padding: 2rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .gallery-full-image {
            width: 100%;
            max-height: 50vh;
            object-fit: contain;
            margin-bottom: 1rem;
            border-radius: 12px;
        }

        .gallery-thumbnails {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .gallery-thumbnail {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border: 3px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .gallery-thumbnail:hover,
        .gallery-thumbnail.active {
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .gallery-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }

        .gallery-counter {
            color: var(--gray);
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                justify-content: center;
                width: 100%;
            }
            
            .container {
                padding: 0 1rem;
                margin: 1rem auto;
            }
            
            .detail-card {
                padding: 1.5rem;
            }
            
            .modal-body {
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            .nav-links {
                flex-direction: column;
                width: 100%;
            }
            
            .nav-links a {
                justify-content: center;
            }
            
            .main-preview-image {
                height: 250px;
            }
            
            .preview-thumbnail {
                width: 80px;
                height: 60px;
            }
        }
    </style>
</head>
<body>
    <!-- Driver Dashboard Header -->
    <div class="header">
        <h1>Parking Details, <span id="username">Driver</span>! üöó</h1>
        <div class="nav-links">
            <a href="driver_dashboard.html">Dashboard</a>
            <a href="find_parking.html">Find Parking</a>
            <a href="my_reservations.html">My Reservations</a>
            <a href="payment.html">Payment Methods</a>
            <a href="notifications.html">
                Notifications
                <span class="notification-badge" id="notificationBadge">3</span>
            </a>
            <a href="index.html">Logout</a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="breadcrumb">
            <a href="find_parking.html">Find Parking</a> &gt; 
            <span id="breadcrumb-lot-name">Downtown Premium Parking</span>
        </div>

        <div class="parking-header-details">
            <div class="header-main">
                <h1 id="lot-name">Downtown Premium Parking</h1>
                <div class="rating-badge">
                    ‚≠ê <span id="avg-rating">4.5</span> 
                    <span class="review-count" id="review-count">(42 reviews)</span>
                </div>
            </div>
            
            <div class="header-actions">
                <form method="POST" class="favorite-form" id="favoriteForm">
                    <button type="button" id="favoriteBtn" class="btn-favorite">
                        ü§ç Add to Favorites
                    </button>
                </form>
                <a href="#" class="btn btn-large" id="reserveBtn">
                    üÖøÔ∏è Reserve Now
                </a>
            </div>
        </div>
        
        <div class="details-grid">
            <div class="details-left">
                <div class="detail-card">
                    <h2>üì∑ Parking Lot Images</h2>
                    <div class="image-gallery-preview">
                        <div class="main-preview-image">
                            <img src="https://images.unsplash.com/photo-1549399542-7e3f8b79c341?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" 
                                 alt="Parking lot image" 
                                 id="mainPreviewImage">
                        </div>
                        
                        <div class="preview-thumbnails" id="previewThumbnails">
                            <!-- Thumbnails will be populated by JavaScript -->
                        </div>
                        
                        <div class="gallery-actions">
                            <button class="btn btn-secondary" onclick="openImageGallery()">
                                üì∑ View All Images (<span id="imageCount">0</span>)
                            </button>
                        </div>
                    </div>
                </div>

                <div class="detail-card">
                    <h2>üìç Overview</h2>
                    <div class="overview-grid">
                        <div class="overview-item">
                            <div class="overview-icon">üÖøÔ∏è</div>
                            <div class="overview-text">
                                <strong id="available-slots">24 Slots Available</strong>
                                <span>Out of <span id="total-slots">50</span> total</span>
                            </div>
                        </div>
                        <div class="overview-item">
                            <div class="overview-icon">üí∞</div>
                            <div class="overview-text">
                                <strong id="price-per-hour">UGX 5,000/hour</strong>
                                <span>Parking rate</span>
                            </div>
                        </div>
                        <div class="overview-item">
                            <div class="overview-icon">‚≠ê</div>
                            <div class="overview-text">
                                <strong id="display-rating">4.5 Rating</strong>
                                <span id="display-review-count">Based on 42 reviews</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="detail-card">
                    <h2>üè¢ Location</h2>
                    <p class="address" id="lot-address">123 Main Street, Downtown, Kampala</p>
                    <div class="map-placeholder">
                        <div class="map-image">
                            üó∫Ô∏è
                        </div>
                        <p><small>Interactive map would be displayed here</small></p>
                    </div>
                </div>

                <div class="detail-card">
                    <h2>üéØ Amenities</h2>
                    <div class="amenities-grid" id="amenitiesGrid">
                        <!-- Amenities will be populated by JavaScript -->
                    </div>
                </div>

                <div class="detail-card">
                    <h2>üÖøÔ∏è Available Slots</h2>
                    <div class="slots-grid" id="slotsGrid">
                        <!-- Slots will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="details-sidebar">
                <div class="sidebar-card">
                    <h3>‚≠ê Recent Reviews</h3>
                    <div class="reviews-list" id="reviewsList">
                        <!-- Reviews will be populated by JavaScript -->
                    </div>
                </div>

                <div class="sidebar-card">
                    <h3>üïí Operating Hours</h3>
                    <div class="operating-hours" id="operatingHours">
                        <!-- Operating hours will be populated by JavaScript -->
                    </div>
                </div>

                <div class="sidebar-card">
                    <h3>üìû Contact Info</h3>
                    <div class="contact-info">
                        <div class="contact-item">
                            <span class="contact-icon">üìû</span>
                            <div class="contact-details">
                                <span class="contact-label">Phone</span>
                                <span class="contact-value">+256 700 000 000</span>
                            </div>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">üìß</span>
                            <div class="contact-details">
                                <span class="contact-label">Email</span>
                                <span class="contact-value">info@downtownparking.com</span>
                            </div>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">üåê</span>
                            <div class="contact-details">
                                <span class="contact-label">Website</span>
                                <span class="contact-value">downtownparking.com</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Gallery Modal -->
    <div class="modal" id="fullImageGallery">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Parking Lot Gallery</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <img id="fullGalleryImage" class="gallery-full-image" alt="Full size parking lot image">
                
                <div class="gallery-thumbnails" id="fullGalleryThumbnails">
                    <!-- Full gallery thumbnails will be populated by JavaScript -->
                </div>
                
                <div class="gallery-navigation">
                    <button class="btn btn-secondary" onclick="changeGalleryImage(-1)">‚Üê Previous</button>
                    <span class="gallery-counter" id="galleryCounter">1 / 0</span>
                    <button class="btn btn-secondary" onclick="changeGalleryImage(1)">Next ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample parking lot data
        const parkingLots = {
            'downtown-premium': {
                id: 'downtown-premium',
                name: 'Downtown Premium Parking',
                address: '123 Main Street, Downtown, Kampala',
                pricePerHour: 5000,
                availableSlots: 24,
                totalSlots: 50,
                avgRating: 4.5,
                totalReviews: 42,
                isFavorite: false,
                images: [
                    'https://images.unsplash.com/photo-1549399542-7e3f8b79c341?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80',
                    'https://images.unsplash.com/photo-1481016570479-9eab6349fde7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    'https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?ixlib=rb-4.0.3&auto=format&fit=crop&w-800&q=80',
                    'https://images.unsplash.com/photo-1518837695005-2083093ee35b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'
                ],
                amenities: [
                    { name: '24/7 Security', icon: 'üîí' },
                    { name: 'CCTV Cameras', icon: 'üìπ' },
                    { name: 'Covered Parking', icon: 'üè†' },
                    { name: 'EV Charging', icon: '‚ö°' },
                    { name: 'Disabled Access', icon: '‚ôø' },
                    { name: 'Car Wash', icon: 'üöø' }
                ],
                slots: [
                    { number: 'A-01', type: 'standard', icon: 'üöó' },
                    { number: 'A-02', type: 'disabled', icon: '‚ôø' },
                    { number: 'A-03', type: 'ev_charging', icon: '‚ö°' },
                    { number: 'B-01', type: 'large', icon: 'üöô' },
                    { number: 'B-02', type: 'standard', icon: 'üöó' },
                    { number: 'B-03', type: 'standard', icon: 'üöó' },
                    { number: 'C-01', type: 'large', icon: 'üöô' },
                    { number: 'C-02', type: 'ev_charging', icon: '‚ö°' }
                ],
                reviews: [
                    {
                        reviewer: 'John D.',
                        rating: 5,
                        comment: 'Excellent parking facility with great security and clean environment.',
                        date: '2 days ago',
                        avatar: 'JD'
                    },
                    {
                        reviewer: 'Sarah M.',
                        rating: 4,
                        comment: 'Good location and reasonable prices. Would recommend!',
                        date: '1 week ago',
                        avatar: 'SM'
                    },
                    {
                        reviewer: 'Michael K.',
                        rating: 5,
                        comment: 'EV charging works perfectly. Very convenient for electric vehicles.',
                        date: '2 weeks ago',
                        avatar: 'MK'
                    }
                ],
                operatingHours: [
                    { day: 'Monday - Friday', time: '6:00 AM - 11:00 PM' },
                    { day: 'Saturday', time: '7:00 AM - 10:00 PM' },
                    { day: 'Sunday', time: '8:00 AM - 9:00 PM' }
                ]
            }
           
        };

        // Global variables
        let currentGalleryIndex = 0;
        let parkingImages = [];
        let currentParkingLot = null;

        // DOM Ready
        document.addEventListener('DOMContentLoaded', function() {
            // Load user data
            loadUserData();
            
            // Load parking lot data
            loadParkingLotData();
            
            // Setup event listeners
            setupEventListeners();
        });

        // Load user data
        function loadUserData() {
            const user = JSON.parse(localStorage.getItem('loggedUser') || '{}');
            if (user) {
                document.getElementById('username').textContent = user.fullName || user.username || 'Driver';
            }
        }

        // Load parking lot data
        function loadParkingLotData() {
            const lotId = getParkingLotIdFromURL();
            currentParkingLot = parkingLots[lotId];
            
            if (!currentParkingLot) {
                // Default to first parking lot if not found
                currentParkingLot = parkingLots['downtown-premium'];
            }
            
            // Update page content
            updateParkingLotContent();
            
            // Update images
            updateImages();
            
            // Update slots
            updateSlots();
            
            // Update amenities
            updateAmenities();
            
            // Update reviews
            updateReviews();
            
            // Update operating hours
            updateOperatingHours();
            
            // Update favorite button
            updateFavoriteButton();
            
            // Update reserve button
            updateReserveButton();
        }

        // Get parking lot ID from URL
        function getParkingLotIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('lot_id') || 'downtown-premium';
        }

        // Update parking lot content
        function updateParkingLotContent() {
            document.getElementById('breadcrumb-lot-name').textContent = currentParkingLot.name;
            document.getElementById('lot-name').textContent = currentParkingLot.name;
            document.getElementById('avg-rating').textContent = currentParkingLot.avgRating;
            document.getElementById('review-count').textContent = `(${currentParkingLot.totalReviews} reviews)`;
            document.getElementById('available-slots').textContent = `${currentParkingLot.availableSlots} Slots Available`;
            document.getElementById('total-slots').textContent = currentParkingLot.totalSlots;
            document.getElementById('price-per-hour').textContent = `UGX ${currentParkingLot.pricePerHour.toLocaleString()}/hour`;
            document.getElementById('display-rating').textContent = `${currentParkingLot.avgRating} Rating`;
            document.getElementById('display-review-count').textContent = `Based on ${currentParkingLot.totalReviews} reviews`;
            document.getElementById('lot-address').textContent = currentParkingLot.address;
        }

        // Update images
        function updateImages() {
            parkingImages = currentParkingLot.images;
            
            // Update main image
            if (parkingImages.length > 0) {
                document.getElementById('mainPreviewImage').src = parkingImages[0];
                document.getElementById('mainPreviewImage').style.display = 'block';
            } else {
                document.getElementById('mainPreviewImage').style.display = 'none';
            }
            
            // Update thumbnails
            const thumbnailsContainer = document.getElementById('previewThumbnails');
            const fullThumbnailsContainer = document.getElementById('fullGalleryThumbnails');
            thumbnailsContainer.innerHTML = '';
            fullThumbnailsContainer.innerHTML = '';
            
            document.getElementById('imageCount').textContent = parkingImages.length;
            
            parkingImages.forEach((image, index) => {
                // Preview thumbnails
                const previewThumb = document.createElement('img');
                previewThumb.className = `preview-thumbnail ${index === 0 ? 'active' : ''}`;
                previewThumb.src = image;
                previewThumb.alt = `Parking image ${index + 1}`;
                previewThumb.onclick = () => changePreviewImage(image, previewThumb);
                thumbnailsContainer.appendChild(previewThumb);
                
                // Full gallery thumbnails
                const fullThumb = document.createElement('img');
                fullThumb.className = `gallery-thumbnail ${index === 0 ? 'active' : ''}`;
                fullThumb.src = image;
                fullThumb.alt = `Parking image ${index + 1}`;
                fullThumb.onclick = () => setGalleryImage(index);
                fullThumbnailsContainer.appendChild(fullThumb);
            });
        }

        // Update slots
        function updateSlots() {
            const slotsContainer = document.getElementById('slotsGrid');
            slotsContainer.innerHTML = '';
            
            if (currentParkingLot.slots.length === 0) {
                const noSlots = document.createElement('p');
                noSlots.className = 'no-slots';
                noSlots.textContent = 'No available slots at the moment. Please check back later.';
                slotsContainer.appendChild(noSlots);
                return;
            }
            
            currentParkingLot.slots.forEach(slot => {
                const slotItem = document.createElement('div');
                slotItem.className = 'slot-item';
                slotItem.setAttribute('data-slot-type', slot.type);
                
                slotItem.innerHTML = `
                    <div class="slot-icon">${slot.icon}</div>
                    <div class="slot-info">
                        <strong>Slot ${slot.number}</strong>
                        <span>${slot.type.replace('_', ' ').charAt(0).toUpperCase() + slot.type.replace('_', ' ').slice(1)}</span>
                    </div>
                `;
                
                slotsContainer.appendChild(slotItem);
            });
        }

        // Update amenities
        function updateAmenities() {
            const amenitiesContainer = document.getElementById('amenitiesGrid');
            amenitiesContainer.innerHTML = '';
            
            currentParkingLot.amenities.forEach(amenity => {
                const amenityItem = document.createElement('div');
                amenityItem.className = 'amenity-item';
                
                amenityItem.innerHTML = `
                    <span class="amenity-icon">${amenity.icon}</span>
                    <span class="amenity-text">${amenity.name}</span>
                `;
                
                amenitiesContainer.appendChild(amenityItem);
            });
        }

        // Update reviews
        function updateReviews() {
            const reviewsContainer = document.getElementById('reviewsList');
            reviewsContainer.innerHTML = '';
            
            if (currentParkingLot.reviews.length === 0) {
                const noReviews = document.createElement('p');
                noReviews.className = 'no-reviews';
                noReviews.textContent = 'No reviews yet. Be the first to review!';
                reviewsContainer.appendChild(noReviews);
                return;
            }
            
            currentParkingLot.reviews.forEach(review => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">${review.avatar}</div>
                            <div class="reviewer-name">${review.reviewer}</div>
                        </div>
                        <div class="review-rating">${review.rating} ‚≠ê</div>
                    </div>
                    <p class="review-comment">"${review.comment}"</p>
                    <div class="review-date">${review.date}</div>
                `;
                
                reviewsContainer.appendChild(reviewItem);
            });
        }

        // Update operating hours
        function updateOperatingHours() {
            const hoursContainer = document.getElementById('operatingHours');
            hoursContainer.innerHTML = '';
            
            currentParkingLot.operatingHours.forEach(hour => {
                const hourItem = document.createElement('div');
                hourItem.className = 'hour-item';
                
                hourItem.innerHTML = `
                    <span class="hour-day">${hour.day}</span>
                    <span class="hour-time">${hour.time}</span>
                `;
                
                hoursContainer.appendChild(hourItem);
            });
        }

        // Update favorite button
        function updateFavoriteButton() {
            const favoriteBtn = document.getElementById('favoriteBtn');
            if (currentParkingLot.isFavorite) {
                favoriteBtn.className = 'btn-favorite btn-favorite-active';
                favoriteBtn.innerHTML = '‚ù§Ô∏è Remove from Favorites';
            } else {
                favoriteBtn.className = 'btn-favorite';
                favoriteBtn.innerHTML = 'ü§ç Add to Favorites';
            }
        }

        // Update reserve button
        function updateReserveButton() {
            const reserveBtn = document.getElementById('reserveBtn');
            reserveBtn.href = `reserve_parking.html?lot_id=${currentParkingLot.id}`;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Favorite button
            document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
            
            // Modal close buttons
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    document.getElementById('fullImageGallery').classList.remove('active');
                });
            });
            
            // Close modal on outside click
            document.getElementById('fullImageGallery').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
            
            // Keyboard navigation for gallery
            document.addEventListener('keydown', function(e) {
                const gallery = document.getElementById('fullImageGallery');
                if (gallery.classList.contains('active')) {
                    if (e.key === 'Escape') {
                        gallery.classList.remove('active');
                    } else if (e.key === 'ArrowLeft') {
                        changeGalleryImage(-1);
                    } else if (e.key === 'ArrowRight') {
                        changeGalleryImage(1);
                    }
                }
            });
        }

        // Toggle favorite
        function toggleFavorite() {
            currentParkingLot.isFavorite = !currentParkingLot.isFavorite;
            updateFavoriteButton();
            
            // Save to localStorage
            const favorites = JSON.parse(localStorage.getItem('favorites') || '{}');
            if (currentParkingLot.isFavorite) {
                favorites[currentParkingLot.id] = currentParkingLot;
            } else {
                delete favorites[currentParkingLot.id];
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
            
            // Show notification
            showNotification(currentParkingLot.isFavorite ? 
                'Added to favorites!' : 'Removed from favorites!');
        }

        // Change preview image
        function changePreviewImage(imageSrc, element) {
            document.getElementById('mainPreviewImage').src = imageSrc;
            
            document.querySelectorAll('.preview-thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            element.classList.add('active');
        }

        // Open image gallery
        function openImageGallery() {
            const modal = document.getElementById('fullImageGallery');
            currentGalleryIndex = 0;
            updateGalleryImage();
            modal.classList.add('active');
        }

        // Update gallery image
        function updateGalleryImage() {
            if (parkingImages.length > 0) {
                document.getElementById('fullGalleryImage').src = parkingImages[currentGalleryIndex];
                document.getElementById('galleryCounter').textContent = `${currentGalleryIndex + 1} / ${parkingImages.length}`;
                document.querySelectorAll('.gallery-thumbnail').forEach((thumb, index) => {
                    thumb.classList.toggle('active', index === currentGalleryIndex);
                });
            }
        }

        // Change gallery image
        function changeGalleryImage(direction) {
            currentGalleryIndex += direction;
            
            if (currentGalleryIndex < 0) {
                currentGalleryIndex = parkingImages.length - 1;
            } else if (currentGalleryIndex >= parkingImages.length) {
                currentGalleryIndex = 0;
            }
            
            updateGalleryImage();
        }

        // Set gallery image
        function setGalleryImage(index) {
            currentGalleryIndex = index;
            updateGalleryImage();
        }

        // Show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, var(--secondary), #0da271);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
                z-index: 1000;
                animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
                font-weight: 600;
                max-width: 300px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Add CSS for animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes fadeOut {
                    from { opacity: 1; transform: translateX(0); }
                    to { opacity: 0; transform: translateX(100%); }
                }
            `;
            document.head.appendChild(style);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }

        // Simulate loading from localStorage on page load
        window.onload = function() {
            // Check if there are saved favorites
            const savedFavorites = JSON.parse(localStorage.getItem('favorites') || '{}');
            if (savedFavorites[currentParkingLot.id]) {
                currentParkingLot.isFavorite = true;
                updateFavoriteButton();
            }
        };
    </script>
</body>
</html>